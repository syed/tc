<html><head><title>ProbabilityTree</title></head><body  ><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>Probability trees are a useful tool in mathematics to help determine conditional probabilities of complex events.  Each node in a probability tree represents an event.  We write P(X) to mean &quot;the probability that event X occurs&quot;, and P(~X) to mean &quot;the probability that event X does not occur&quot;.  If a node is at the root of the tree, it has a single number associated with it (between 0.0 and 1.0, inclusive) which represents the likelihood of this event taking place.  All other nodes on the tree have two numbers attached to them: the probability of this event happening if the parent node's event occurs, and the probability of this event happening if the parent node's event does not occur. If the current node is A and the parent node is B, these probabilities are referred to as P(A|B) (probability of A given B) and P(A|~B) (probability of A given not-B), respectively.</p>

<p>For example, here is a tree with only two nodes:<br></br>
<img src="http://www.topcoder.com/contest/problem/ProbabilityTree/probtree2.gif"></img></p>

<p>To calculate the probability of event 1 occurring (whether or not event 0 occurs), one can use this rule:<br></br>
<tt>P(A) = P(A|B) * P(B) + P(A|~B) * P(~B)</tt><br></br>
The following diagram shows a more complete list of probabilities which can be derived:<br></br>
<img src="http://www.topcoder.com/contest/problem/ProbabilityTree/probtree1.gif"></img></p>

<p>Note that the sum of two opposite events is always equal to 1. P(1) was calculated as follows:<br></br>
<tt>P(1) = P(1|0) * P(0) + P(1|~0) * P(~0) = (0.4 * 0.7) + (0.6 * 0.1) = 0.34</tt></p>

<p>You will be given a vector &lt;string&gt; <b>tree</b>, representing a probability tree.  The first element of <b>tree</b> represents the root node, and will be a single integer between 1 and 99, inclusive, representing the percent likelihood of the event taking place. Each successive element of <b>tree</b> will be of the form &quot;&lt;parent&gt; &lt;prob1&gt; &lt;prob2&gt;&quot;, where &lt;parent&gt; is the zero-based index of the parent node in <b>tree</b>, and &lt;prob1&gt; and &lt;prob2&gt; are P(A|B) and P(A|~B) for this node, respectively.  You will also be given two percentages, <b>lowerBound</b> and <b>upperBound</b>.  Your method should return a vector &lt;int&gt; containing every node X, in ascending order, such that <b>lowerBound</b> &lt; P(X) &lt; <b>upperBound</b>.</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>ProbabilityTree</td></tr><tr><td>Method:</td><td>getOdds</td></tr><tr><td>Parameters:</td><td>vector &lt;string&gt;, int, int</td></tr><tr><td>Returns:</td><td>vector &lt;int&gt;</td></tr><tr><td>Method signature:</td><td>vector &lt;int&gt; getOdds(vector &lt;string&gt; tree, int lowerBound, int upperBound)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td>&#160;&#160;&#160;&#160;</td></tr><tr><td></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>tree</b> will contain between 1 and 50 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>tree</b> will contain between 1 and 8 characters, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>The first element of <b>tree</b> will contain a single integer between 1 and 99, inclusive, with no leading zeroes.</td></tr><tr><td align="center" valign="top">-</td><td>All other elements of <b>tree</b> will contain three space-separated integers of the form &quot;&lt;parent&gt; &lt;prob1&gt; &lt;prob2&gt;&quot;, with no unnecessary leading zeroes.</td></tr><tr><td align="center" valign="top">-</td><td>&lt;parent&gt; will be an integer between 0 and N-1, inclusive, where N is the number of elements in <b>tree</b>.</td></tr><tr><td align="center" valign="top">-</td><td>&lt;prob1&gt; and &lt;prob2&gt; will be between 1 and 99, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>All nodes in <b>tree</b> will be connected, directly or indirectly, to the root node.</td></tr><tr><td align="center" valign="top">-</td><td><b>lowerBound</b> will be between 0 and 99, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>upperBound</b> will be between 1 and 100, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>lowerBound</b> will be strictly less than <b>upperBound</b>.</td></tr><tr><td align="center" valign="top">-</td><td>No event's likelihood will be within 1e-9 of <b>lowerBound</b> or <b>upperBound</b>.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;40&quot;,&quot;0 70 10&quot;}</pre></td></tr><tr><td><pre>30</pre></td></tr><tr><td><pre>50</pre></td></tr></table></td></tr><tr><td><pre>Returns: { 0,  1 }</pre></td></tr><tr><td><table><tr><td colspan="2">This is the example from the problem statement.  The probability of event 0 is 0.4, and the probability of event 1 is 0.34, both of which are within the specified range.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;20&quot;,&quot;2 50 50&quot;,&quot;0 50 50&quot;}</pre></td></tr><tr><td><pre>49</pre></td></tr><tr><td><pre>51</pre></td></tr></table></td></tr><tr><td><pre>Returns: { 1,  2 }</pre></td></tr><tr><td><table><tr><td colspan="2">Both event 1 and event 2 have 50% probabilities of happening, regardless of what happens at their parents.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;10&quot;,&quot;0 99 41&quot;,&quot;1 40 3&quot;,&quot;2 91 43&quot;}</pre></td></tr><tr><td><pre>81</pre></td></tr><tr><td><pre>88</pre></td></tr></table></td></tr><tr><td><pre>Returns: { }</pre></td></tr><tr><td><table><tr><td colspan="2"><pre>
event | probability (rounded)
------+------------
 0    | 0.10
 1    | 0.47
 2    | 0.20
 3    | 0.53
</pre></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;79&quot;,&quot;0 64 52&quot;,&quot;1 70 87&quot;,&quot;0 38 99&quot;,&quot;1 24 8&quot;}</pre></td></tr><tr><td><pre>47</pre></td></tr><tr><td><pre>81</pre></td></tr></table></td></tr><tr><td><pre>Returns: { 0,  1,  2,  3 }</pre></td></tr><tr><td></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;51&quot;,
 &quot;29 58 3&quot;,
 &quot;6 56 86&quot;,
 &quot;18 97 1&quot;,
 &quot;44 99 25&quot;,
 &quot;33 69 90&quot;,
 &quot;27 67 49&quot;,
 &quot;32 15 19&quot;,
 &quot;33 1 21&quot;,
 &quot;45 12 33&quot;,
 &quot;29 24 40&quot;,
 &quot;45 86 74&quot;,
 &quot;40 30 65&quot;,
 &quot;0 18 27&quot;,
 &quot;1 90 65&quot;,
 &quot;0 47 62&quot;,
 &quot;40 81 72&quot;,
 &quot;42 25 56&quot;,
 &quot;45 16 81&quot;,
 &quot;8 94 92&quot;,
 &quot;29 41 92&quot;,
 &quot;24 4 29&quot;,
 &quot;32 56 91&quot;,
 &quot;20 16 77&quot;,
 &quot;1 35 79&quot;,
 &quot;45 77 61&quot;,
 &quot;6 50 19&quot;,
 &quot;20 69 43&quot;,
 &quot;4 6 16&quot;,
 &quot;15 55 26&quot;,
 &quot;42 73 90&quot;,
 &quot;40 8 49&quot;,
 &quot;33 16 33&quot;,
 &quot;15 95 47&quot;,
 &quot;9 66 40&quot;,
 &quot;25 80 39&quot;,
 &quot;35 72 70&quot;,
 &quot;27 10 36&quot;,
 &quot;40 36 10&quot;,
 &quot;32 2 48&quot;,
 &quot;33 44 23&quot;,
 &quot;22 51 45&quot;,
 &quot;25 8 43&quot;,
 &quot;18 32 96&quot;,
 &quot;45 41 74&quot;,
 &quot;0 51 6&quot;,
 &quot;18 48 15&quot;}</pre></td></tr><tr><td><pre>8</pre></td></tr><tr><td><pre>82</pre></td></tr></table></td></tr><tr><td><pre>Returns: 
{ 0,  1,  2,  3,  4,  5,  6,  7,  9,  10,  11,  12,  13,  14,  15,  16,
  17,  18,  20,  21,  23,  24,  25,  26,  27,  28,  29,  31,  32,  33,
  34,  35,  36,  37,  38,  39,  40,  41,  42,  43,  44,  45,  46 }</pre></td></tr><tr><td></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>